<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>AI CATIA Automation</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <link rel="stylesheet" src="{{ url_for('static', filename='styles.css') }}"></link>
</head>
<body class="h-screen w-screen bg-gray-100 text-gray-900">
  <div class="flex h-full">
    <!-- Chat Section -->
    <div class="w-1/2 border-r border-gray-300 flex flex-col">
      <div class="h-screen flex items-center justify-center">
        <div class="flex-1 overflow-y-auto p-4" id="chat-window">
          <!-- Chat messages will be appended here -->
  
          <form class="v-screen flex flex-col items-center justify-center" id="chat-form" method="POST" enctype="multipart/form-data" action="/upload">
            <!-- <input type="file" id="file-input" name="catpart_file" class="text-sm" accept=".CATPart"/> -->
            <div class="w-[400px] relative border-2 border-gray-300 border-dashed rounded-lg p-6 bg-white" id="dropzone">
              <input type="file" id="file-upload" name="file-upload" accept=".CATPart"
                class="absolute inset-0 w-full h-full opacity-0 z-50 cursor-pointer" />
              <div class="text-center pointer-events-none">
                <img class="mx-auto h-12 w-12" src="https://www.svgrepo.com/show/357902/image-upload.svg" alt="">
                <h3 class="mt-2 text-sm font-medium text-gray-900">
                  <span>Drag and drop</span>
                  <span class="text-indigo-600"> or browse</span>
                  <span> to upload</span>
                </h3>
                <p class="mt-1 text-xs text-gray-500">
                  .CATPart file
                </p>
              </div>
              <img src="" class="mt-4 mx-auto max-h-40 hidden" id="preview" alt="Preview">
            </div>
            <div class="text-center pointer-events-none">
              <input type="text" id="user-input" name="user_input" placeholder="Type your prompt..."
                class="flex-1 p-2 border rounded-md" />
              <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded-md">Send</button>
            </div>
          </form>
        </div>
      </div>
  
    </div>
    
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <ul>
          {% for category, message in messages %}
            <li class="{{ category }}">{{ message }}</li>
          {% endfor %}
        </ul>
      {% endif %} 
    {% endwith %}



    <!-- Output Section -->
    <div class="w-1/2 p-4 flex flex-col items-center">
      <div class="w-full h-[80%] flex items-center justify-center border bg-white rounded-md shadow">
        <img id="cad-image" src="" alt="CAD Output" class="max-h-full max-w-full object-contain hidden" />
        <p id="placeholder-text" class="text-gray-400">Image output will appear here</p>
      </div>
      <div class="mt-4 flex gap-4">
        <button id="prev-btn" class="px-4 py-2 bg-gray-300 rounded-md">◀ Prev</button>
        <button id="next-btn" class="px-4 py-2 bg-gray-300 rounded-md">Next ▶</button>
      </div>
    </div>
  </div>

  <script src="{{ url_for('static', filename='index.js') }}"></script>
</body>
</html>
